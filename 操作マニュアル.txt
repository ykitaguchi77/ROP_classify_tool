# 動画/画像 手動分類ツール 操作マニュアル (デスクトップアプリ版)

## 1. アプリケーションの起動

### macOS の場合

1.  Finder で `main.app` を探す:  配布された `dist` フォルダの中に `main.app` というアプリケーションバンドルがあります。
2.  `main.app` を実行: `main.app` をダブルクリックしてアプリケーションを起動します。
3.  Macのセキュリティにより開けない場合は、controlキーを押しながら起動してください

### Windows の場合

1.  エクスプローラーで `dist` フォルダを探す: 配布された `dist` フォルダを開きます。
2.  `main.exe` を実行: `dist` フォルダの中にある `main.exe` ファイルをダブルクリックしてアプリケーションを起動します。

## 2. 基本的な操作フロー

1.  動画または画像の選択:
    - `[動画/画像 選択]` ボタンをクリックします。
    - 動画を選択するか、画像を選択するかを尋ねるダイアログが表示されます。
        - 動画の場合: 「はい」を選択し、動画ファイル（.mp4, .avi, .mov, .mkv）を1つ選択します。
        - 画像の場合: 「いいえ」を選択し、分類したい画像ファイル（.jpg, .jpeg, .png, .bmp）を複数選択します。
2.  保存先/作業フォルダの指定:
    - 動画の場合:
        - フレーム画像を保存する「親フォルダ」を選択するよう促されます。指定した親フォルダ内に、動画ファイル名と同じ名前のフォルダが自動的に作成され、そこにフレーム画像（JPG形式）が保存されます。
        - フレーム抽出処理が開始され、進捗バーが表示されます。処理が完了すると、最初のフレーム画像が表示されます。
    - 画像の場合:
        - 選択した画像ファイルをコピーして作業するための「作業用フォルダ」を選択するよう促されます。指定した作業フォルダに、選択した画像がコピーされます。
        - コピーが完了すると、最初の画像が表示されます。
3.  画像の表示とナビゲーション:
    - 中央のエリアに画像が表示されます。
    - 画像の下には、ファイル名と現在の画像番号/総画像数が表示されます（例: `Image: frame_0001.jpg (1 / 150)`）。
    - `[<< 前へ]` ボタンまたは `←` (左矢印キー) で前の画像に移動します。
    - `[次へ >>]` ボタンまたは `→` (右矢印キー) で次の画像に移動します。
4.  画像の分類:
    - 表示されている画像を分類します。
    - `[Yes (Y)]` ボタンまたは `Y` キーで「Yes」と分類します。
    - `[No (N)]` ボタンまたは `N` キーで「No」と分類します。
    - 分類を行うと、自動的に次の画像へ移動します。
    - 分類済みの画像には枠線が表示されます（Yes: 緑色, No: 赤色）。未分類の場合は灰色の枠線です。
5.  分類結果の保存:
    - 作業が完了したら、`[Finalize (CSV出力)]` ボタンをクリックします。
    - 保存するCSVファイルの名前と場所を指定するダイアログが表示されます。ファイル名を指定し（拡張子 `.csv` が自動で付与されます）、保存します。
    - CSVファイルには、フレーム番号（1始まり）、画像ファイル名、分類結果（Yes/No/空欄）が記録されます。
6.  中断と再開:
    - 作業を中断し、後で再開したい場合は、まず `[Finalize (CSV出力)]` で途中経過をCSVファイルに保存します。
    - 再開時は、まず通常通り動画または画像を選択し、画像が表示された状態にします。
    - 次に `[CSV読込(再開)]` ボタンをクリックし、保存しておいたCSVファイルを選択します。
    - CSVファイルの内容が読み込まれ、既存の分類結果が反映されます。最初の画像が表示されるので、続きから作業を行えます。
7.  終了:
    - `[終了]` ボタンをクリックするか、ウィンドウのクローズボタンでアプリケーションを終了します。作業内容は自動保存されないため、必ず `[Finalize (CSV出力)]` で保存してください。

## 3. 各ボタンと機能の詳細

- `[動画/画像 選択]`: 動画ファイル（1つ）または画像ファイル（複数）を選択して読み込みます。
- `[JPG保存先 指定]`: （主に動画処理時のフレーム保存先指定のために内部的に使われます。通常、ユーザーが直接操作する必要性は低いです。）
- `[CSV読込(再開)]`: 以前に保存したCSVファイルを読み込み、分類作業を再開します。読み込むCSVは、現在表示している画像群に対応している必要があります。
- `[<< 前へ]` (または `←` キー): 前の画像を表示します。
- `[Yes (Y)]` (または `Y` キー): 現在の画像を「Yes」と分類し、次の画像へ進みます。
- `[No (N)]` (または `N` キー): 現在の画像を「No」と分類し、次の画像へ進みます。
- `[次へ >>]` (または `→` キー): 次の画像を表示します。
- `[Finalize (CSV出力)]`: 現在の分類結果をCSVファイルとして保存します。
- `[終了]`: アプリケーションを終了します。

## 4. キーボードショートカット

- `←` (左矢印キー): 前の画像へ
- `→` (右矢印キー): 次の画像へ
- `Y` キー: 「Yes」と分類して次へ
- `N` キー: 「No」と分類して次へ

## 5. 注意点

- 動画のフレーム保存: 動画ファイルを選択した場合、フレーム画像は指定した「親フォルダ」の下に 動画ファイル名と同じ名前の新しいフォルダ が作成され、その中に保存されます。
- 画像のコピー: 複数画像を選択した場合、それらの画像は指定した「作業用フォルダ」に コピー されます。元のファイルが変更されることはありません。
- CSVフォーマット: CSVファイルには `frame_index`, `image_name`, `classification` というヘッダーが必要です。再開時に読み込むCSVはこのフォーマットに従っている必要があります。
- 保存: 作業内容は自動保存されません。アプリケーションを閉じる前や作業を中断する前には、必ず `[Finalize (CSV出力)]` ボタンでCSVファイルに保存してください。 